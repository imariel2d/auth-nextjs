import { NextApiHandler, NextApiRequest, NextApiResponse } from "next";import { verify } from 'jsonwebtoken';export const middleware = (fn: NextApiHandler) => (req: NextApiRequest, res: NextApiResponse) => {  if (!process.env.JWT_KEY) {    throw new Error('JWT_TOKEN IS NOT SET UP');  }  if (!req.cookies.auth) {    res.status(401).json({ error: 'Not authorized!'});    return;  }  verify(req.cookies.auth, process.env.JWT_KEY, (err, decoded) => {    if (!err && decoded) {      return fn(req, res)    }    res.status(401).json({ error: 'Not authorized!'})  });};